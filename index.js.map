{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"50461526-1c4ae7086be4914a89297c276\";\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error(`Pixabay API Hatasƒ±: ${error.message}`);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst resultsContainer = document.querySelector('#results-container');\nconst loadMoreBtn = document.getElementById('load-more-btn');\n// Tek bir lightbox √∂rneƒüi, ba≈ülangƒ±√ßta null\nlet lightbox = null;\n\n/**\n * Yeni g√∂rselleri mevcut listeye ekler, container'ƒ± temizlemez.\n * Lightbox'ƒ± refresh eder.\n */\nexport function renderImages(data) {\n  // Her resim <li> i√ßinde olacak ≈üekilde markup olu≈üturuyoruz\n  const markup = data.hits.map(hit => `\n    \n      <a class=\"image-card\" href=\"${hit.largeImageURL}\">\n        <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n        <div class=\"image-info\">\n          <p class=\"tags\">Tags: ${hit.tags}</p>\n          <div class=\"stats\">\n            <span>üëç ${hit.likes}</span>\n            <span>üëÅÔ∏è ${hit.views}</span>\n            <span>üí¨ ${hit.comments}</span>\n            <span>‚¨áÔ∏è ${hit.downloads}</span>\n          </div>\n        </div>\n      </a>\n    \n  `).join('');\n\n  // Yeni g√∂rselleri mevcut i√ßeriƒüe ekle\n  resultsContainer.insertAdjacentHTML('beforeend', markup);\n\n  // Eƒüer lightbox √∂rneƒüi yoksa olu≈ütur\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('#results-container a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      captionPosition: 'bottom',\n    });\n  } else {\n    // Zaten varsa sadece refresh et\n    lightbox.refresh();\n  }\n}\nexport function clearGallery() {\n  const container = document.querySelector('#results-container');\n  container.innerHTML = '';\n}\nexport function showLoader() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n}\n\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loadMoreBtn = document.getElementById('load-more-btn');\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.search-input');\nconst myDiv = document.getElementById(\"load-more\");\nlet currentQuery = '';\nlet currentPage = 1;\nconst limit = 40;  // API‚Äôden sayfa ba≈üƒ± √ßekilen sonu√ß sayƒ±sƒ±\nlet totalPages = 0;\n\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const query = searchInput.value.trim();\n  if (!query) return;\n\n  currentQuery = query;\n  currentPage = 1;\n\n  showLoader();\n  clearGallery();\n  hideLoadMoreButton();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    totalPages = Math.ceil(data.totalHits / limit);\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: \"Uyarƒ±\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\"\n      });\n      return;\n    }\n\n    renderImages(data);\n    myDiv.style.display = 'flex';\n    myDiv.style.justifyContent = 'center';\n    if (data.hits.length < limit) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n\n  } catch (error) {\n    iziToast.error({\n      title: \"Hata\",\n      message: \"Bir sorun olu≈ütu. L√ºtfen daha sonra tekrar deneyin.\",\n      position: \"topRight\"\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderImages(data);\n\n    if (currentPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results\"\n      });\n    }\n\n    const firstCard = document.querySelector('.image-card');\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n\n  } catch (error) {\n    iziToast.error({\n      title: \"Hata\",\n      message: \"Daha fazla resim y√ºklenemedi.\",\n      position: \"topRight\"\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","resultsContainer","loadMoreBtn","lightbox","renderImages","data","markup","hit","SimpleLightbox","clearGallery","container","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchInput","myDiv","currentQuery","currentPage","limit","totalPages","e","iziToast","firstCard","cardHeight"],"mappings":"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"}